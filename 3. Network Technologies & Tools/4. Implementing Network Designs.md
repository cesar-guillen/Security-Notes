There are several elements involved when creatin a secure network. This includes the use of various topologies and network appliances.

## Security Zones
Most network have internet connectivity but it is rare to connect a network directly to the internet. Instead, its common to divide the network into different *Security Zones*.

* **Intranet**: An internal network people use to communicate and share content with each other.
* **Extranet**: Part of a network that can be accessed by authorized entities from outside the network. 

> [!NOTE]
> The goal of placing systems into different zones is to limit the connectivity they have to each other, which reduces the ***attack surface***.

##### Screened Subnet
A *screened subnet*, also known as a ***demilitarized zone (DMS)***, is a security zone between private networks and the internet. This servers will receive most of the attacks as they face the internet were most attackers seek to attack. 

![[Pasted image 20251024171928.png]]

In this configuration, one firewall separates the screened subnet from the Internet. The second firewall separates the screened subnet from the internal network. Each firewall includes detailed rules designed to filter traffic and protect both the internal network and public-facing servers.

##### Network Address Translation Gateway
*Network Address Translation (NAT)* is a protocol that translates public IP addresses into private IP addresses and vice versa. A *NAT Gateway* hosts NAT and provides internal clients with private IP addresses a path to the internet. Some benefits include:

* **Public IP Addresses do not need to be purchased for all clients**. A home or company network ca include multiple computers that can access the Internet from one router running NAT. 
* **NAT hides internal computers from the Internet**. Computers with private IP addresses are isolated and hidden from the Internet. ^af7b39

The drawback of NAT is that it is incompatible with [[2. Protocol Use Cases#^97191e|IPsec]]. There can be two types of NAT:

1. **Static NAT**: uses a single public IP address in a one-to-one mapping. It maps a private IP address with a single public address.
2. **Dynamic NAT**: uses multiple public IP addresses in a one-to-many mapping. It decides which public IP address to use based on load.  

##### Physical Isolation and Air Gaps
*Physical isolation* ensures that one network is not connected to another network. If an attacker cannot reach it from the internet it is much more difficult to attack it. However, if the system is connected to the internal network, an attacker can access internal computers and then access any internal resource.  

An *air gap* isolates one network from another by ensuring there is physical space (literally a gap of air) between all systems and cables.

##### Logical Separation and Segmentation
[[3. Basic Network Infrastructure#Routers|Routers]] and [[3. Basic Network Infrastructure#Firewalls|firewalls]] provide a basic level of *separation* and *segmentation*. Routers segment traffic between networks using rules within ACLs. Firewalls separate network traffic using basic packet filtering rules. 

It is also possible to segment traffic between logical groups of users or computers with a ***virtual local area network (VLAN)*** which provide logical separation

##### Isolating Traffic with a VLAN
*A virtual local area network (VLAN)* uses switches to group several computers into a virtual network based on rules like department or job requirements. etc. This provides security as it isolates the traffic between computers in different *VLANs*.

Routers would normally do this job but they are only able to group computers based on physical location but VLANs can use switches to map groups that are physically together.

> [!NOTE]
> East-West Traffic Within a network, east-west traffic refers to traffic between servers. Imagine looking at a network diagram of servers within a network. These usually show servers configured horizontally (or side-by-side), so traffic between servers travels east and west. In contrast, network diagrams typically show clients above or below the servers, and traffic between clients and servers is north-south.


## Network Appliances
*Network appliances* are dedicated systems designed to fulfill a specific need. The word appliance is used to show that you do not need to know how the item works to use it. Vendors handle all the details, making it easier for administrators.

## Proxy Servers
Many networks use *proxy servers* to forward requests for services from clients. They can  improve performance by ***caching content***, and some proxy servers can restrict users' access to inappropriate sites by ***filtering content***. Proxy servers are located in between the Extranet and the Intranet.  

Admins configure internal clients to use they proxy for specific protocols. Most proxy servers handle HTTP and HTTPS but can also work with others, such as FTP.

![[Pasted image 20251025163337.png]]

> [!NOTE]
> Most organizations use centralized proxy servers that sit on the network in a strategic location where they can intercept and analyze user requests. However, it’s also possible to perform content filtering using an agent-based approach where the filter resides on each user’s computer. The filter receives a policy from the organization’s centralized policy server but then enforces it directly on the user’s system.

##### Reverse Proxy
A *reverse proxy* accepts requests from the internet, typically for a single web server. It appears to clients as a web server but it is forwarding the requests to the web server and serving the pages returned by it. This is done to protect the web server.

![[Pasted image 20251025165655.png]]

## Unified Threat Management
*Unified Threat Management (UTM)* is a single solution that combines multiple security controls. The overall goal of UTMs is to provide better security while also simplifying management requirements. 

They combine the security features of multiple security solutions into a single appliance. For example it may include the following:

* URL Filtering
* Malware Inspection
* Content Inspection
* DDoS Mitigation

It is quite common to place UTMs at the network border, between the internet and the Intranet. It also depends what it is being used for, different uses, different placements.

## Jump Server
A *jump server* of *jump box* is a hardened server used to access and manage devices in a different security zone.  

It’s essential to ensure that the jump server is hardened. Ideally, it isn’t used for anything else, so it won’t have any other services running. Any additional services on the server give attackers another target. Additionally, the target system should restrict connections from systems other than the jump server.

The jump server cam be used to connect to other machines with `ssh -J maggie@jump maggie@ca1`. It first connects to the jump server and then uses TCP forwarding to connect to the CA machine.

## Zero Trust
Everything that is inside our network or belongs to us is considered safe, while everything outside is considered dangerous, has worked well but now it is being replaced.

The new philosophy in network security is *zero trust network security (ZTNS)*. This odes mean that everything is treated as untrusted but it refers to the idea that we do not make trust decisions based on network location. We instead focus on implementing strong authentication systems and creating policy-driven access controls based upon a user's identity instead of their system's location. 

![[Pasted image 20251025174640.png]]

## Control Plane vs. Data Plane
Zero-trust environments use logical or physical separation to divide two different types of communication. The communications used to control and configure the network take place on a network known as the control plane, while the communications used by end users and software to communicate with each other take place on a network called the data plane. Separating the control plane from the data plane reduces the likelihood that an attacker will be able to reconfigure the network by accessing the control plane.

The control pane has two key components:
1. The **Policy Engine (PE)** decides whether to grant access to a resource.
2. The **Policy Administrator (PA)** is responsible for communicating the decisions made by the PE to the PEP

The Data plane has four key components:
1. The **subject** who wishes to access a resource
2. The **system** used by the user to access the resource
3. The **enterprise resource** that the user wishes to access, a file or service
4. The Policy Enforcement Point (PEP) that determines whether to allow that access. This is the only system that can cross the two planes.

## Secure Access Service  Edge
*Secure access service edge (SASE)*  is a design philosophy closely related to **ZTNA** that brings together networking and security functions and delivers them as an integrated cloud service. SASE is a broader philosophy that builds upon zero-trust and adds additional security services, including: 
* Firewall services Secure web gateway services 
* Anti-malware services Intrusion prevention services
* Cloud access service broker (CASB) services 
* [[3. Protecting Data#Data Loss Prevention|Data loss prevention (DLP)]] services